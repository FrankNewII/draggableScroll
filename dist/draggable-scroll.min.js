!function(e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof module&&module.exports)module.exports=e(require("jquery"));else{if("undefined"==typeof jQuery)throw new Error("DraggableScroll: Draggable scroll is depended on JQuery. \n            Please append JQuery to document before load DraggableScroll plugin.");e(jQuery)}}(function(r){r.fn.draggableScroll=function e(l){if(!(this instanceof e))return(l=e.validateConfig(l)).$element=this,new e(l);this._config=l,this._$scrolledElm=this._config.$element,this._pressed=!1,this._startX=void 0,this._isAnimate=!1,this._startY=void 0,this._startScrollX=void 0,this._startScrollY=void 0,this._findElm()._appendStyles()._initListeners()};var l=r.fn.draggableScroll,e=r.fn.draggableScroll.prototype;l.validateConfig=function(e){switch(typeof e){case"object":return r.extend(l.defaultConfig,e);case"undefined":return r.extend(l.defaultConfig,{});default:throw new Error("DraggableScroll: Undefined type of config argument.")}},l.defaultConfig={scrollX:!0,scrollY:!0,dropOnMouseLeave:!1,animateScrollByControls:!0,animateScrollTime:200,hideScrollbars:!0},e.scrollTo=function(e,l,t){var o,s="scroll"+e.charAt(0).toUpperCase()+e.slice(1);if(void 0!==l)if(t){var r={};r[s]=l,this._$scrolledElm.animate(r,this._config.animateScrollTime),this._isAnimate=!0,setTimeout(function(){this._isAnimate=!1}.bind(this),this._config.animateScrollTime)}else this._$scrolledElm[s](l);else o=this._$scrolledElm[s]();return o},e._findElm=function(){if(this._$scrolledWrapper=this._config.$element,this._$scrolledElm=this._config.$element.find("[data-draggable-scrolled-content]"),0===this._$scrolledElm.length)throw new Error("DraggableScroll: Cannon find scrolled content element. \n            Use [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");if(1<this._$scrolledElm.length)throw new Error("DraggableScroll: Found more than one [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");return this},e._appendStyles=function(){var e=this._config.hideScrollbars;return this._$scrolledWrapper.css("user-select","none"),e&&this._$scrolledWrapper.css("overflow","hidden"),this._$scrolledElm.css({overflow:"scroll",height:e?"calc(100% + 17px)":"100%",width:e?"calc(100% + 17px)":"100%"}),this},e._initListeners=function(){return this._$scrolledElm.on("mousedown",this.__mousedownHandler.bind(this)).on("mouseup",this.__mouseupHandler.bind(this)).on("mousemove",this.__mousemoveHandler.bind(this)),this._$scrolledWrapper.find("[data-draggable-scroll-control]").on("click",this.__controlsClickHandler.bind(this)),this._config.dropOnMouseLeave&&this._$scrolledElm.on("mouseleave",this.__mouseupHandler.bind(this)),this},e.__mouseupHandler=function(){this._pressed=!1,this._$scrolledWrapper.removeClass("scrollDraggable-draging")},e.__mousedownHandler=function(e){this._pressed=!0,this._startX=e.clientX,this._startY=e.clientY,this._startScrollX=this.scrollTo("left"),this._startScrollY=this.scrollTo("top"),this._$scrolledWrapper.addClass("scrollDraggable-draging")},e.__mousemoveHandler=function(e){this._pressed&&(this._config.scrollX&&this.scrollTo("left",this._startScrollX+(this._startX-e.clientX)),this._config.scrollY&&this.scrollTo("top",this._startScrollY+(this._startY-e.clientY)))},e.__controlsClickHandler=function(e){if(!this._isAnimate){var l,t=r(e.target).data("draggableScrollControl").split(":"),o=t[0],s=parseInt(t[1]);switch(o){case"top":s=0-s,l=this.scrollTo("top");break;case"bottom":l=this.scrollTo("top"),o="top";break;case"left":l=this.scrollTo("left"),s=0-s;break;case"right":o="left",l=this.scrollTo("left")}console.log(o,l+s,this._config.animateScrollByControls),this.scrollTo(o,l+s,this._config.animateScrollByControls)}};var t=r("[data-draggable-scroll]");t.length&&t.each(function(e,l){r(l).draggableScroll()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYWdnYWJsZS1zY3JvbGwuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiRXJyb3IiLCIkIiwiZm4iLCJkcmFnZ2FibGVTY3JvbGwiLCJEcmFnZ2FibGVTY3JvbGwiLCJjb25maWciLCJ0aGlzIiwidmFsaWRhdGVDb25maWciLCIkZWxlbWVudCIsIl9jb25maWciLCJfJHNjcm9sbGVkRWxtIiwiX3ByZXNzZWQiLCJfc3RhcnRYIiwidW5kZWZpbmVkIiwiX2lzQW5pbWF0ZSIsIl9zdGFydFkiLCJfc3RhcnRTY3JvbGxYIiwiX3N0YXJ0U2Nyb2xsWSIsIl9maW5kRWxtIiwiX2FwcGVuZFN0eWxlcyIsIl9pbml0TGlzdGVuZXJzIiwic3RhdGljcyIsInByb3RvdHlwZSIsImNvbmYiLCJleHRlbmQiLCJkZWZhdWx0Q29uZmlnIiwic2Nyb2xsWCIsInNjcm9sbFkiLCJkcm9wT25Nb3VzZUxlYXZlIiwiYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHMiLCJhbmltYXRlU2Nyb2xsVGltZSIsImhpZGVTY3JvbGxiYXJzIiwic2Nyb2xsVG8iLCJ0dXJuIiwicHhzIiwiYW5pbSIsInZhbCIsIm1ldGhvZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJhbmltUGFyYW0iLCJhbmltYXRlIiwic2V0VGltZW91dCIsImJpbmQiLCJfJHNjcm9sbGVkV3JhcHBlciIsImZpbmQiLCJsZW5ndGgiLCJoaWRlU2Nyb2xsIiwiY3NzIiwib3ZlcmZsb3ciLCJoZWlnaHQiLCJ3aWR0aCIsIm9uIiwiX19tb3VzZWRvd25IYW5kbGVyIiwiX19tb3VzZXVwSGFuZGxlciIsIl9fbW91c2Vtb3ZlSGFuZGxlciIsIl9fY29udHJvbHNDbGlja0hhbmRsZXIiLCJyZW1vdmVDbGFzcyIsImV2IiwiY2xpZW50WCIsImNsaWVudFkiLCJhZGRDbGFzcyIsImN1cnJlbnRWYWwiLCJkYXRhIiwidGFyZ2V0Iiwic3BsaXQiLCJkaXJlY3Rpb24iLCJzdGVwIiwicGFyc2VJbnQiLCJjb25zb2xlIiwibG9nIiwiJGNvbnRhaW5lcnMiLCJlYWNoIiwiaSIsImVsIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUNBLEdBQUEsbUJBQUFDLFFBQUFBLE9BQUFDLElBQ0FELE9BQUEsQ0FBQSxVQUFBRCxRQUVBLEdBQUEsaUJBQUFHLFFBQUFBLE9BQUFDLFFBQ0FELE9BQUFDLFFBQUFKLEVBQUFLLFFBQUEsZUFFQSxDQUNBLEdBQUEsb0JBQUFDLE9BQ0EsTUFBQSxJQUFBQyxNQUFBLCtJQUlBUCxFQUFBTSxTQWJBLENBZUEsU0FBQUUsR0FDQUEsRUFBQUMsR0FBQUMsZ0JBQUEsU0FBQUMsRUFBQUMsR0FDQSxLQUFBQyxnQkFBQUYsR0FJQSxPQUhBQyxFQUFBRCxFQUFBRyxlQUFBRixJQUNBRyxTQUFBRixLQUVBLElBQUFGLEVBQUFDLEdBR0FDLEtBQUFHLFFBQUFKLEVBQ0FDLEtBQUFJLGNBQUFKLEtBQUFHLFFBQUFELFNBQ0FGLEtBQUFLLFVBQUEsRUFDQUwsS0FBQU0sYUFBQUMsRUFDQVAsS0FBQVEsWUFBQSxFQUNBUixLQUFBUyxhQUFBRixFQUNBUCxLQUFBVSxtQkFBQUgsRUFDQVAsS0FBQVcsbUJBQUFKLEVBRUFQLEtBQUFZLFdBQ0FDLGdCQUNBQyxrQkFHQSxJQUFBQyxFQUFBcEIsRUFBQUMsR0FBQUMsZ0JBQ0FtQixFQUFBckIsRUFBQUMsR0FBQUMsZ0JBQUFtQixVQUVBRCxFQUFBZCxlQUFBLFNBQUFnQixHQUNBLGNBQUEsR0FDQSxJQUFBLFNBQ0EsT0FBQXRCLEVBQUF1QixPQUFBSCxFQUFBSSxjQUFBRixHQUNBLElBQUEsWUFDQSxPQUFBdEIsRUFBQXVCLE9BQUFILEVBQUFJLGNBQUEsSUFDQSxRQUNBLE1BQUEsSUFBQXpCLE1BQUEseURBSUFxQixFQUFBSSxjQUFBLENBQ0FDLFNBQUEsRUFDQUMsU0FBQSxFQUNBQyxrQkFBQSxFQUNBQyx5QkFBQSxFQUNBQyxrQkFBQSxJQUNBQyxnQkFBQSxHQUdBVCxF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RUFBQXpELEtBQUEwQixTQUFBLFFBQ0FvQyxFQUFBLEVBQUFBLEVBQ0EsTUFDQSxJQUFBLFFBQ0FELEVBQUEsT0FDQUosRUFBQXpELEtBQUEwQixTQUFBLFFBR0FzQyxRQUFBQyxJQUFBSixFQUFBSixFQUFBSyxFQUFBOUQsS0FBQUcsUUFBQW9CLHlCQUNBdkIsS0FBQTBCLFNBQUFtQyxFQUFBSixFQUFBSyxFQUFBOUQsS0FBQUcsUUFBQW9CLDJCQUdBLElBQUEyQyxFQUFBdkUsRUFBQSwyQkFFQXVFLEVBQUF6QixRQUNBeUIsRUFBQUMsS0FBQSxTQUFBQyxFQUFBQyxHQUNBMUUsRUFBQTBFLEdBQUF4RSIsImZpbGUiOiJkcmFnZ2FibGUtc2Nyb2xsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIGpRdWVyeSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHJhZ2dhYmxlU2Nyb2xsOiBEcmFnZ2FibGUgc2Nyb2xsIGlzIGRlcGVuZGVkIG9uIEpRdWVyeS4gXFxuXFxcbiAgICAgICAgICAgIFBsZWFzZSBhcHBlbmQgSlF1ZXJ5IHRvIGRvY3VtZW50IGJlZm9yZSBsb2FkIERyYWdnYWJsZVNjcm9sbCBwbHVnaW4uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbiAoJCkge1xuICAgICQuZm4uZHJhZ2dhYmxlU2Nyb2xsID0gZnVuY3Rpb24gRHJhZ2dhYmxlU2Nyb2xsKGNvbmZpZykge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHJhZ2dhYmxlU2Nyb2xsKSkge1xuICAgICAgICAgICAgY29uZmlnID0gRHJhZ2dhYmxlU2Nyb2xsLnZhbGlkYXRlQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgICAgICBjb25maWcuJGVsZW1lbnQgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IERyYWdnYWJsZVNjcm9sbChjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG0gPSB0aGlzLl9jb25maWcuJGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX3ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhcnRYID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9pc0FuaW1hdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhcnRZID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zdGFydFNjcm9sbFggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N0YXJ0U2Nyb2xsWSA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLl9maW5kRWxtKClcbiAgICAgICAgICAgIC5fYXBwZW5kU3R5bGVzKClcbiAgICAgICAgICAgIC5faW5pdExpc3RlbmVycygpO1xuICAgIH07XG5cbiAgICB2YXIgc3RhdGljcyA9ICQuZm4uZHJhZ2dhYmxlU2Nyb2xsO1xuICAgIHZhciBwcm90b3R5cGUgPSAkLmZuLmRyYWdnYWJsZVNjcm9sbC5wcm90b3R5cGU7XG5cbiAgICBzdGF0aWNzLnZhbGlkYXRlQ29uZmlnID0gZnVuY3Rpb24gKGNvbmYpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgKGNvbmYpKSB7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZChzdGF0aWNzLmRlZmF1bHRDb25maWcsIGNvbmYpO1xuICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoc3RhdGljcy5kZWZhdWx0Q29uZmlnLCB7fSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHJhZ2dhYmxlU2Nyb2xsOiBVbmRlZmluZWQgdHlwZSBvZiBjb25maWcgYXJndW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc3RhdGljcy5kZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBzY3JvbGxZOiB0cnVlLFxuICAgICAgICBkcm9wT25Nb3VzZUxlYXZlOiBmYWxzZSxcbiAgICAgICAgYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHM6IHRydWUsXG4gICAgICAgIGFuaW1hdGVTY3JvbGxUaW1lOiAyMDAsXG4gICAgICAgIGhpZGVTY3JvbGxiYXJzOiB0cnVlXG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5zY3JvbGxUbyA9IGZ1bmN0aW9uICh0dXJuLCBweHMsIGFuaW0pIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9ICdzY3JvbGwnICsgdHVybi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR1cm4uc2xpY2UoMSk7XG4gICAgICAgIHZhciB2YWw7XG5cbiAgICAgICAgaWYgKHB4cyAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1QYXJhbSA9IHt9O1xuXG4gICAgICAgICAgICAgICAgYW5pbVBhcmFtW21ldGhvZF0gPSBweHM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG1cbiAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoYW5pbVBhcmFtLCB0aGlzLl9jb25maWcuYW5pbWF0ZVNjcm9sbFRpbWUpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5faXNBbmltYXRlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0FuaW1hdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMuX2NvbmZpZy5hbmltYXRlU2Nyb2xsVGltZSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVkRWxtW21ldGhvZF0ocHhzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0gdGhpcy5fJHNjcm9sbGVkRWxtW21ldGhvZF0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5fZmluZEVsbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlciA9IHRoaXMuX2NvbmZpZy4kZWxlbWVudDtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkRWxtID0gdGhpcy5fY29uZmlnLiRlbGVtZW50LmZpbmQoJ1tkYXRhLWRyYWdnYWJsZS1zY3JvbGxlZC1jb250ZW50XScpO1xuXG4gICAgICAgIGlmICh0aGlzLl8kc2Nyb2xsZWRFbG0ubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcmFnZ2FibGVTY3JvbGw6IENhbm5vbiBmaW5kIHNjcm9sbGVkIGNvbnRlbnQgZWxlbWVudC4gXFxuXFxcbiAgICAgICAgICAgIFVzZSBbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsZWQtY29udGVudF0gaW5zaWRlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxdIGNvbnRhaW5lci4nKTtcblxuICAgICAgICBpZiAodGhpcy5fJHNjcm9sbGVkRWxtLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RyYWdnYWJsZVNjcm9sbDogRm91bmQgbW9yZSB0aGFuIG9uZSBbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsZWQtY29udGVudF0gaW5zaWRlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxdIGNvbnRhaW5lci4nKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9hcHBlbmRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoaWRlU2Nyb2xsID0gdGhpcy5fY29uZmlnXG4gICAgICAgICAgICAuaGlkZVNjcm9sbGJhcnM7XG5cbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxuICAgICAgICAgICAgLmNzcygndXNlci1zZWxlY3QnLCAnbm9uZScpO1xuXG4gICAgICAgIGlmIChoaWRlU2Nyb2xsKSB7XG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyXG4gICAgICAgICAgICAgICAgLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG1cbiAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICdzY3JvbGwnLFxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiBoaWRlU2Nyb2xsID8gJ2NhbGMoMTAwJSArIDE3cHgpJyA6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBoaWRlU2Nyb2xsID8gJ2NhbGMoMTAwJSArIDE3cHgpJyA6ICcxMDAlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBwcm90b3R5cGUuX2luaXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZEVsbVxuICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9fbW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZXVwJywgdGhpcy5fX21vdXNldXBIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oJ21vdXNlbW92ZScsIHRoaXMuX19tb3VzZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcbiAgICAgICAgICAgIC5maW5kKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsLWNvbnRyb2xdJylcbiAgICAgICAgICAgIC5vbignY2xpY2snLCB0aGlzLl9fY29udHJvbHNDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5kcm9wT25Nb3VzZUxlYXZlKSB7XG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG0ub24oJ21vdXNlbGVhdmUnLCB0aGlzLl9fbW91c2V1cEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9fbW91c2V1cEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlci5yZW1vdmVDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWRyYWdpbmcnKTtcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9fbW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICB0aGlzLl9wcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc3RhcnRYID0gZXYuY2xpZW50WDtcbiAgICAgICAgdGhpcy5fc3RhcnRZID0gZXYuY2xpZW50WTtcbiAgICAgICAgdGhpcy5fc3RhcnRTY3JvbGxYID0gdGhpcy5zY3JvbGxUbygnbGVmdCcpO1xuICAgICAgICB0aGlzLl9zdGFydFNjcm9sbFkgPSB0aGlzLnNjcm9sbFRvKCd0b3AnKTtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlci5hZGRDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWRyYWdpbmcnKTtcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9fbW91c2Vtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBpZiAodGhpcy5fcHJlc3NlZCkge1xuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnNjcm9sbFggJiYgdGhpcy5zY3JvbGxUbygnbGVmdCcsIHRoaXMuX3N0YXJ0U2Nyb2xsWCArICh0aGlzLl9zdGFydFggLSBldi5jbGllbnRYKSk7XG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc2Nyb2xsWSAmJiB0aGlzLnNjcm9sbFRvKCd0b3AnLCB0aGlzLl9zdGFydFNjcm9sbFkgKyAodGhpcy5fc3RhcnRZIC0gZXYuY2xpZW50WSkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5fX2NvbnRyb2xzQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzQW5pbWF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgJHRhcmdldCA9ICQoZXYudGFyZ2V0KTtcbiAgICAgICAgdmFyIGRhdGEgPSAkdGFyZ2V0LmRhdGEoJ2RyYWdnYWJsZVNjcm9sbENvbnRyb2wnKS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGF0YVswXTtcbiAgICAgICAgdmFyIHN0ZXAgPSBwYXJzZUludChkYXRhWzFdKTtcbiAgICAgICAgdmFyIGN1cnJlbnRWYWw7XG5cbiAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgc3RlcCA9IDAgLSBzdGVwO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWwgPSB0aGlzLnNjcm9sbFRvKCd0b3AnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbCA9IHRoaXMuc2Nyb2xsVG8oJ3RvcCcpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICd0b3AnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbCA9IHRoaXMuc2Nyb2xsVG8oJ2xlZnQnKTtcbiAgICAgICAgICAgICAgICBzdGVwID0gMCAtIHN0ZXA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gJ2xlZnQnO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWwgPSB0aGlzLnNjcm9sbFRvKCdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coZGlyZWN0aW9uLCBjdXJyZW50VmFsICsgc3RlcCwgdGhpcy5fY29uZmlnLmFuaW1hdGVTY3JvbGxCeUNvbnRyb2xzKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhkaXJlY3Rpb24sIGN1cnJlbnRWYWwgKyBzdGVwLCB0aGlzLl9jb25maWcuYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHMpO1xuICAgIH07XG5cbiAgICB2YXIgJGNvbnRhaW5lcnMgPSAkKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsXScpO1xuXG4gICAgaWYgKCRjb250YWluZXJzLmxlbmd0aCkge1xuICAgICAgICAkY29udGFpbmVycy5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgJChlbCkuZHJhZ2dhYmxlU2Nyb2xsKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKTsiXX0=
