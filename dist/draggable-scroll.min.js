!function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"==typeof module&&module.exports)module.exports=t(require("jquery"));else{if("undefined"==typeof jQuery)throw new Error("DraggableScroll: Draggable scroll is depended on JQuery. \n            Please append JQuery to document before load DraggableScroll plugin.");t(jQuery)}}(function(r){r.fn.draggableScroll=function t(i){if(!(this instanceof t))return(i=t.validateConfig(i)).$element=this,new t(i);this._config=i,this._$scrolledElm=this._config.$element,this._pressed=!1,this._startMousedownX=void 0,this._isAnimate=!1,this._startMousedownY=void 0,this._startScrollX=void 0,this._startScrollY=void 0,this._startInertionPointX=0,this._startInertionPointY=0,this._lastInertionPointX=this._startInertionPointX,this._lastInertionPointY=this._startInertionPointY,this._findElm()._appendStyles()._initListeners()};var i,e,s=r.fn.draggableScroll,t=r.fn.draggableScroll.prototype;s.validateConfig=function(t){switch(typeof t){case"object":return r.extend(s.defaultConfig,t);case"undefined":return r.extend(s.defaultConfig,{});default:throw new Error("DraggableScroll: Undefined type of config argument.")}},s._unitsConverters={px:function(t){return t},vw:(e=r(document),function(t){return e.width()/100*t}),vh:(i=r(document),function(t){return i.height()/100*t})},s.addUnitConverter=function(t,i){s._unitsConverters[t]&&console.warn("Converter for "+t+" was changed."),s._unitsConverters[t]=i},s.converterUnitToPxs=function(t,i){var e=s._unitsConverters[i];if(!e)throw new Error('Undefined css units named as: "'+i+'" \n.Add converter ($.fn.draggableScroll.addUnitConverter(unit, convertFunction)) to PXs for that unit, or you have a typo.');return e(t)},s.defaultConfig={scrollX:!0,scrollY:!0,dropOnMouseLeave:!1,animateScrollByControls:!0,animateScrollTime:200,hideScrollbars:!0,inertiaByDragging:!0},t.scrollTo=function(t,i,e){var n,o="scroll"+t.charAt(0).toUpperCase()+t.slice(1);if(void 0!==i)if(e){var r={};r[o]=i,this._$scrolledElm.animate(r,this._config.animateScrollTime),this._isAnimate=!0,setTimeout(function(){this._isAnimate=!1}.bind(this),this._config.animateScrollTime)}else this._$scrolledElm[o](i);else n=this._$scrolledElm[o]();return n},t._findElm=function(){if(this._$scrolledWrapper=this._config.$element,this._$scrolledElm=this._config.$element.find("[data-draggable-scrolled-content]"),0===this._$scrolledElm.length)throw new Error("DraggableScroll: Cannon find scrolled content element. \n            Use [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");if(1<this._$scrolledElm.length)throw new Error("DraggableScroll: Found more than one [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");return this},t._appendStyles=function(){var t=this._config.hideScrollbars;return this._$scrolledWrapper.css("user-select","none"),t&&this._$scrolledWrapper.css("overflow","hidden"),this._$scrolledElm.css({overflow:"scroll",height:t?"calc(100% + 17px)":"100%",width:t?"calc(100% + 17px)":"100%"}),this},t._initListeners=function(){return this._$scrolledElm.on("mousedown",this.__mousedownHandler.bind(this)).on("mouseup",this.__mouseupHandler.bind(this)).on("mousemove",this.__mousemoveHandler.bind(this)),this._$scrolledWrapper.find("[data-draggable-scroll-control]").on("click",this.__controlsClickHandler.bind(this)),this._config.dropOnMouseLeave&&this._$scrolledElm.on("mouseleave",this.__mouseupHandler.bind(this)),this},t.__inertionMove=function(){Math.abs(this._inertiaX)<1&&(this._inertiaX=0);var t=this;if(Math.abs(this._inertiaY)<1&&(this._inertiaY=0),this._inertiaX){var i=this._inertiaX/20;this._inertiaX-=i/2,this.scrollTo("left",this.scrollTo("left")+i)}if(this._inertiaY){var e=this._inertiaY/20;this._inertiaY-=e/2,this.scrollTo("top",this.scrollTo("top")+e)}this._$scrolledWrapper.addClass("scrollDraggable-inertion-move"),(this._inertiaY||this._inertiaX)&&setTimeout(function(){t.__inertionMove()},0)},t.__mouseupHandler=function(t){if(this._pressed=!1,this._$scrolledWrapper.removeClass("scrollDraggable-draging"),this._config.inertiaByDragging){var i=this._lastInertionPointX,e=this._lastInertionPointY,n=t.clientX,o=t.clientY;this._inertiaX=60*(i-n),this._inertiaY=60*(e-o),this.__inertionMove()}},t.__mousedownHandler=function(t){this._pressed=!0,this._startMousedownX=t.clientX,this._startMousedownY=t.clientY,this._startScrollX=this.scrollTo("left"),this._startScrollY=this.scrollTo("top"),this._config.inertiaByDragging&&(this._lastInertionPointX=this._startInertionPointX,this._lastInertionPointY=this._startInertionPointY,this._startInertionPointX=t.clientX,this._startInertionPointY=t.clientY,this._inertiaX=0,this._inertiaY=0),this._$scrolledWrapper.addClass("scrollDraggable-draging")},t.__mousemoveHandler=function(t){this._pressed&&(this._config.inertiaByDragging&&(this._lastInertionPointX=this._startInertionPointX,this._lastInertionPointY=this._startInertionPointY,this._startInertionPointX=t.clientX,this._startInertionPointY=t.clientY),this._config.scrollX&&this.scrollTo("left",this._startScrollX+(this._startMousedownX-t.clientX)),this._config.scrollY&&this.scrollTo("top",this._startScrollY+(this._startMousedownY-t.clientY)))},t.__controlsClickHandler=function(t){if(!this._isAnimate){var i,e=r(t.target).data("draggableScrollControl").split(":"),n=e[0],o=s.converterUnitToPxs(parseInt(e[1]),e[1].match(/[^\d\.]+/i)[0]);switch(n){case"top":o=0-o,i=this.scrollTo("top");break;case"bottom":i=this.scrollTo("top"),n="top";break;case"left":i=this.scrollTo("left"),o=0-o;break;case"right":n="left",i=this.scrollTo("left")}this.scrollTo(n,i+o,this._config.animateScrollByControls)}};var n=r("[data-draggable-scroll]");n.length&&n.each(function(t,i){r(i).draggableScroll()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYWdnYWJsZS1zY3JvbGwuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiRXJyb3IiLCIkIiwiZm4iLCJkcmFnZ2FibGVTY3JvbGwiLCJEcmFnZ2FibGVTY3JvbGwiLCJjb25maWciLCJ0aGlzIiwidmFsaWRhdGVDb25maWciLCIkZWxlbWVudCIsIl9jb25maWciLCJfJHNjcm9sbGVkRWxtIiwiX3ByZXNzZWQiLCJfc3RhcnRNb3VzZWRvd25YIiwidW5kZWZpbmVkIiwiX2lzQW5pbWF0ZSIsIl9zdGFydE1vdXNlZG93blkiLCJfc3RhcnRTY3JvbGxYIiwiX3N0YXJ0U2Nyb2xsWSIsIl9zdGFydEluZXJ0aW9uUG9pbnRYIiwiX3N0YXJ0SW5lcnRpb25Qb2ludFkiLCJfbGFzdEluZXJ0aW9uUG9pbnRYIiwiX2xhc3RJbmVydGlvblBvaW50WSIsIl9maW5kRWxtIiwiX2FwcGVuZFN0eWxlcyIsIl9pbml0TGlzdGVuZXJzIiwiJGRvYyIsInN0YXRpY3MiLCJwcm90b3R5cGUiLCJjb25mIiwiZXh0ZW5kIiwiZGVmYXVsdENvbmZpZyIsIl91bml0c0NvbnZlcnRlcnMiLCJweCIsImRpZyIsInZ3IiwiZG9jdW1lbnQiLCJ3aWR0aCIsInZoIiwiaGVpZ2h0IiwiYWRkVW5pdENvbnZlcnRlciIsInVuaXQiLCJjb252ZXJ0ZXIiLCJjb25zb2xlIiwid2FybiIsImNvbnZlcnRlclVuaXRUb1B4cyIsInNjcm9sbFgiLCJzY3JvbGxZIiwiZHJvcE9uTW91c2VMZWF2ZSIsImFuaW1hdGVTY3JvbGxCeUNvbnRyb2xzIiwiYW5pbWF0ZVNjcm9sbFRpbWUiLCJoaWRlU2Nyb2xsYmFycyIsImluZXJ0aWFCeURyYWdnaW5nIiwic2Nyb2xsVG8iLCJ0dXJuIiwidW5pdHMiLCJhbmltIiwidmFsIiwibWV0aG9kIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImFuaW1QYXJhbSIsImFuaW1hdGUiLCJzZXRUaW1lb3V0IiwiYmluZCIsIl8kc2Nyb2xsZWRXcmFwcGVyIiwiZmluZCIsImxlbmd0aCIsImhpZGVTY3JvbGwiLCJjc3MiLCJvdmVyZmxvdyIsIm9uIiwiX19tb3VzZWRvd25IYW5kbGVyIiwiX19tb3VzZXVwSGFuZGxlciIsIl9fbW91c2Vtb3ZlSGFuZGxlciIsIl9fY29udHJvbHNDbGlja0hhbmRsZXIiLCJfX2luZXJ0aW9uTW92ZSIsIk1hdGgiLCJhYnMiLCJfaW5lcnRpYVgiLCJzZWxmIiwiX2luZXJ0aWFZIiwic3RlcFgiLCJzdGVwWSIsImFkZENsYXNzIiwiZXYiLCJyZW1vdmVDbGFzcyIsImxhc3RYIiwibGFzdFkiLCJjdXJyZW50WCIsImNsaWVudFgiLCJjdXJyZW50WSIsImNsaWVudFkiLCJjdXJyZW50VmFsIiwiZGF0YSIsInRhcmdldCIsInNwbGl0IiwiZGlyZWN0aW9uIiwic3RlcCIsInBhcnNlSW50IiwibWF0Y2giLCIkY29udGFpbmVycyIsImVhY2giLCJpIiwiZWwiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEdBQ0EsR0FBQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFDQUQsT0FBQSxDQUFBLFVBQUFELFFBRUEsR0FBQSxpQkFBQUcsUUFBQUEsT0FBQUMsUUFDQUQsT0FBQUMsUUFBQUosRUFBQUssUUFBQSxlQUVBLENBQ0EsR0FBQSxvQkFBQUMsT0FDQSxNQUFBLElBQUFDLE1BQUEsK0lBSUFQLEVBQUFNLFNBYkEsQ0FlQSxTQUFBRSxHQUNBQSxFQUFBQyxHQUFBQyxnQkFBQSxTQUFBQyxFQUFBQyxHQUNBLEtBQUFDLGdCQUFBRixHQUlBLE9BSEFDLEVBQUFELEVBQUFHLGVBQUFGLElBQ0FHLFNBQUFGLEtBRUEsSUFBQUYsRUFBQUMsR0FHQUMsS0FBQUcsUUFBQUosRUFDQUMsS0FBQUksY0FBQUosS0FBQUcsUUFBQUQsU0FDQUYsS0FBQUssVUFBQSxFQUNBTCxLQUFBTSxzQkFBQUMsRUFDQVAsS0FBQVEsWUFBQSxFQUNBUixLQUFBUyxzQkFBQUYsRUFDQVAs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Q0FDLEVBQUEsRUFBQUEsRUFDQUwsRUFBQXZGLEtBQUE4QyxTQUFBLE9BQ0EsTUFDQSxJQUFBLFNBQ0F5QyxFQUFBdkYsS0FBQThDLFNBQUEsT0FDQTZDLEVBQUEsTUFDQSxNQUNBLElBQUEsT0FDQUosRUFBQXZGLEtBQUE4QyxTQUFBLFFBQ0E4QyxFQUFBLEVBQUFBLEVBQ0EsTUFDQSxJQUFBLFFBQ0FELEVBQUEsT0FDQUosRUFBQXZGLEtBQUE4QyxTQUFBLFFBSUE5QyxLQUFBOEMsU0FBQTZDLEVBQUFKLEVBQUFLLEVBQUE1RixLQUFBRyxRQUFBdUMsMkJBR0EsSUFBQXFELEVBQUFwRyxFQUFBLDJCQUVBb0csRUFBQWxDLFFBQ0FrQyxFQUFBQyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0F2RyxFQUFBdUcsR0FBQXJHIiwiZmlsZSI6ImRyYWdnYWJsZS1zY3JvbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcblxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcmFnZ2FibGVTY3JvbGw6IERyYWdnYWJsZSBzY3JvbGwgaXMgZGVwZW5kZWQgb24gSlF1ZXJ5LiBcXG5cXFxuICAgICAgICAgICAgUGxlYXNlIGFwcGVuZCBKUXVlcnkgdG8gZG9jdW1lbnQgYmVmb3JlIGxvYWQgRHJhZ2dhYmxlU2Nyb2xsIHBsdWdpbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gICAgJC5mbi5kcmFnZ2FibGVTY3JvbGwgPSBmdW5jdGlvbiBEcmFnZ2FibGVTY3JvbGwoY29uZmlnKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEcmFnZ2FibGVTY3JvbGwpKSB7XG4gICAgICAgICAgICBjb25maWcgPSBEcmFnZ2FibGVTY3JvbGwudmFsaWRhdGVDb25maWcoY29uZmlnKTtcbiAgICAgICAgICAgIGNvbmZpZy4kZWxlbWVudCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgRHJhZ2dhYmxlU2Nyb2xsKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZEVsbSA9IHRoaXMuX2NvbmZpZy4kZWxlbWVudDtcbiAgICAgICAgdGhpcy5fcHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zdGFydE1vdXNlZG93blggPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2lzQW5pbWF0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zdGFydE1vdXNlZG93blkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N0YXJ0U2Nyb2xsWCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc3RhcnRTY3JvbGxZID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zdGFydEluZXJ0aW9uUG9pbnRYID0gMDtcbiAgICAgICAgdGhpcy5fc3RhcnRJbmVydGlvblBvaW50WSA9IDA7XG5cbiAgICAgICAgdGhpcy5fbGFzdEluZXJ0aW9uUG9pbnRYID0gdGhpcy5fc3RhcnRJbmVydGlvblBvaW50WDtcbiAgICAgICAgdGhpcy5fbGFzdEluZXJ0aW9uUG9pbnRZID0gdGhpcy5fc3RhcnRJbmVydGlvblBvaW50WTtcblxuICAgICAgICB0aGlzLl9maW5kRWxtKClcbiAgICAgICAgICAgIC5fYXBwZW5kU3R5bGVzKClcbiAgICAgICAgICAgIC5faW5pdExpc3RlbmVycygpO1xuICAgIH07XG5cbiAgICB2YXIgc3RhdGljcyA9ICQuZm4uZHJhZ2dhYmxlU2Nyb2xsO1xuICAgIHZhciBwcm90b3R5cGUgPSAkLmZuLmRyYWdnYWJsZVNjcm9sbC5wcm90b3R5cGU7XG5cbiAgICBzdGF0aWNzLnZhbGlkYXRlQ29uZmlnID0gZnVuY3Rpb24gKGNvbmYpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgKGNvbmYpKSB7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZChzdGF0aWNzLmRlZmF1bHRDb25maWcsIGNvbmYpO1xuICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoc3RhdGljcy5kZWZhdWx0Q29uZmlnLCB7fSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHJhZ2dhYmxlU2Nyb2xsOiBVbmRlZmluZWQgdHlwZSBvZiBjb25maWcgYXJndW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc3RhdGljcy5fdW5pdHNDb252ZXJ0ZXJzID0ge1xuICAgICAgICBweDogZnVuY3Rpb24gKGRpZykge1xuICAgICAgICAgICAgcmV0dXJuIGRpZztcbiAgICAgICAgfSxcbiAgICAgICAgdnc6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGRvYyA9ICQoZG9jdW1lbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiAkZG9jLndpZHRoKCkgLyAxMDAgKiBkaWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCksXG4gICAgICAgIHZoOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRkb2MgPSAkKGRvY3VtZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkaWcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGRvYy5oZWlnaHQoKSAvIDEwMCAqIGRpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKVxuICAgIH07XG5cbiAgICBzdGF0aWNzLmFkZFVuaXRDb252ZXJ0ZXIgPSBmdW5jdGlvbiAodW5pdCwgY29udmVydGVyKSB7XG4gICAgICAgIGlmIChzdGF0aWNzLl91bml0c0NvbnZlcnRlcnNbdW5pdF0pXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbnZlcnRlciBmb3IgJyArIHVuaXQgKyAnIHdhcyBjaGFuZ2VkLicpO1xuXG4gICAgICAgIHN0YXRpY3MuX3VuaXRzQ29udmVydGVyc1t1bml0XSA9IGNvbnZlcnRlcjtcbiAgICB9O1xuXG4gICAgc3RhdGljcy5jb252ZXJ0ZXJVbml0VG9QeHMgPSBmdW5jdGlvbiAoZGlnLCB1bml0KSB7XG4gICAgICAgIHZhciBjb252ZXJ0ZXIgPSBzdGF0aWNzLl91bml0c0NvbnZlcnRlcnNbdW5pdF07XG5cbiAgICAgICAgaWYgKCFjb252ZXJ0ZXIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZGVmaW5lZCBjc3MgdW5pdHMgbmFtZWQgYXM6IFwiJyt1bml0KydcIiBcXG5cXC4nICtcbiAgICAgICAgICAgICAgICAnQWRkIGNvbnZlcnRlciAoJC5mbi5kcmFnZ2FibGVTY3JvbGwuYWRkVW5pdENvbnZlcnRlcih1bml0LCBjb252ZXJ0RnVuY3Rpb24pKSB0byBQWHMgZm9yIHRoYXQgdW5pdCwgb3IgeW91IGhhdmUgYSB0eXBvLicpO1xuXG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIoZGlnKTtcbiAgICB9O1xuXG4gICAgc3RhdGljcy5kZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBzY3JvbGxZOiB0cnVlLFxuICAgICAgICBkcm9wT25Nb3VzZUxlYXZlOiBmYWxzZSxcbiAgICAgICAgYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHM6IHRydWUsXG4gICAgICAgIGFuaW1hdGVTY3JvbGxUaW1lOiAyMDAsXG4gICAgICAgIGhpZGVTY3JvbGxiYXJzOiB0cnVlLFxuICAgICAgICBpbmVydGlhQnlEcmFnZ2luZzogdHJ1ZVxuICAgIH07XG5cbiAgICBwcm90b3R5cGUuc2Nyb2xsVG8gPSBmdW5jdGlvbiAodHVybiwgdW5pdHMsIGFuaW0pIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9ICdzY3JvbGwnICsgdHVybi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR1cm4uc2xpY2UoMSk7XG4gICAgICAgIHZhciB2YWw7XG5cbiAgICAgICAgaWYgKHVuaXRzICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgaWYgKGFuaW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbVBhcmFtID0ge307XG5cbiAgICAgICAgICAgICAgICBhbmltUGFyYW1bbWV0aG9kXSA9IHVuaXRzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVkRWxtXG4gICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKGFuaW1QYXJhbSwgdGhpcy5fY29uZmlnLmFuaW1hdGVTY3JvbGxUaW1lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2lzQW5pbWF0ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNBbmltYXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLl9jb25maWcuYW5pbWF0ZVNjcm9sbFRpbWUpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxlZEVsbVttZXRob2RdKHVuaXRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0gdGhpcy5fJHNjcm9sbGVkRWxtW21ldGhvZF0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5fZmluZEVsbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlciA9IHRoaXMuX2NvbmZpZy4kZWxlbWVudDtcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkRWxtID0gdGhpcy5fY29uZmlnLiRlbGVtZW50LmZpbmQoJ1tkYXRhLWRyYWdnYWJsZS1zY3JvbGxlZC1jb250ZW50XScpO1xuXG4gICAgICAgIGlmICh0aGlzLl8kc2Nyb2xsZWRFbG0ubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcmFnZ2FibGVTY3JvbGw6IENhbm5vbiBmaW5kIHNjcm9sbGVkIGNvbnRlbnQgZWxlbWVudC4gXFxuXFxcbiAgICAgICAgICAgIFVzZSBbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsZWQtY29udGVudF0gaW5zaWRlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxdIGNvbnRhaW5lci4nKTtcblxuICAgICAgICBpZiAodGhpcy5fJHNjcm9sbGVkRWxtLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RyYWdnYWJsZVNjcm9sbDogRm91bmQgbW9yZSB0aGFuIG9uZSBbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsZWQtY29udGVudF0gaW5zaWRlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxdIGNvbnRhaW5lci4nKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9hcHBlbmRTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoaWRlU2Nyb2xsID0gdGhpcy5fY29uZmlnXG4gICAgICAgICAgICAuaGlkZVNjcm9sbGJhcnM7XG5cbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxuICAgICAgICAgICAgLmNzcygndXNlci1zZWxlY3QnLCAnbm9uZScpO1xuXG4gICAgICAgIGlmIChoaWRlU2Nyb2xsKSB7XG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyXG4gICAgICAgICAgICAgICAgLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG1cbiAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICdzY3JvbGwnLFxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiBoaWRlU2Nyb2xsID8gJ2NhbGMoMTAwJSArIDE3cHgpJyA6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBoaWRlU2Nyb2xsID8gJ2NhbGMoMTAwJSArIDE3cHgpJyA6ICcxMDAlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBwcm90b3R5cGUuX2luaXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZEVsbVxuICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9fbW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZXVwJywgdGhpcy5fX21vdXNldXBIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgICAgICAub24oJ21vdXNlbW92ZScsIHRoaXMuX19tb3VzZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcbiAgICAgICAgICAgIC5maW5kKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsLWNvbnRyb2xdJylcbiAgICAgICAgICAgIC5vbignY2xpY2snLCB0aGlzLl9fY29udHJvbHNDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5kcm9wT25Nb3VzZUxlYXZlKSB7XG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG1cbiAgICAgICAgICAgICAgICAub24oJ21vdXNlbGVhdmUnLCB0aGlzLl9fbW91c2V1cEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLl9faW5lcnRpb25Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5faW5lcnRpYVgpIDwgMSlcbiAgICAgICAgICAgIHRoaXMuX2luZXJ0aWFYID0gMDtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuX2luZXJ0aWFZKSA8IDEpXG4gICAgICAgICAgICB0aGlzLl9pbmVydGlhWSA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuX2luZXJ0aWFYKSB7XG4gICAgICAgICAgICB2YXIgc3RlcFggPSB0aGlzLl9pbmVydGlhWCAvIDIwO1xuICAgICAgICAgICAgdGhpcy5faW5lcnRpYVggLT0gc3RlcFggLyAyO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbygnbGVmdCcsIHRoaXMuc2Nyb2xsVG8oJ2xlZnQnKSArIHN0ZXBYKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9pbmVydGlhWSkge1xuICAgICAgICAgICAgdmFyIHN0ZXBZID0gdGhpcy5faW5lcnRpYVkgLyAyMDtcbiAgICAgICAgICAgIHRoaXMuX2luZXJ0aWFZIC09IHN0ZXBZIC8gMjtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8oJ3RvcCcsIHRoaXMuc2Nyb2xsVG8oJ3RvcCcpICsgc3RlcFkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxuICAgICAgICAgICAgLmFkZENsYXNzKCdzY3JvbGxEcmFnZ2FibGUtaW5lcnRpb24tbW92ZScpO1xuXG4gICAgICAgICh0aGlzLl9pbmVydGlhWSB8fCB0aGlzLl9pbmVydGlhWCkgJiYgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLl9faW5lcnRpb25Nb3ZlKCk7XG4gICAgICAgIH0sIDApO1xuICAgIH07XG5cbiAgICBwcm90b3R5cGUuX19tb3VzZXVwSGFuZGxlciA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICB0aGlzLl9wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWRyYWdpbmcnKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5pbmVydGlhQnlEcmFnZ2luZykge1xuICAgICAgICAgICAgdmFyIGxhc3RYID0gdGhpcy5fbGFzdEluZXJ0aW9uUG9pbnRYO1xuICAgICAgICAgICAgdmFyIGxhc3RZID0gdGhpcy5fbGFzdEluZXJ0aW9uUG9pbnRZO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRYID0gZXYuY2xpZW50WDtcbiAgICAgICAgICAgIHZhciBjdXJyZW50WSA9IGV2LmNsaWVudFk7XG4gICAgICAgICAgICB0aGlzLl9pbmVydGlhWCA9IChsYXN0WCAtIGN1cnJlbnRYKSAqIDYwOyAvL3BlciBzZWNcbiAgICAgICAgICAgIHRoaXMuX2luZXJ0aWFZID0gKGxhc3RZIC0gY3VycmVudFkpICogNjA7XG5cbiAgICAgICAgICAgIHRoaXMuX19pbmVydGlvbk1vdmUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcm90b3R5cGUuX19tb3VzZWRvd25IYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIHRoaXMuX3ByZXNzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zdGFydE1vdXNlZG93blggPSBldi5jbGllbnRYO1xuICAgICAgICB0aGlzLl9zdGFydE1vdXNlZG93blkgPSBldi5jbGllbnRZO1xuICAgICAgICB0aGlzLl9zdGFydFNjcm9sbFggPSB0aGlzLnNjcm9sbFRvKCdsZWZ0Jyk7XG4gICAgICAgIHRoaXMuX3N0YXJ0U2Nyb2xsWSA9IHRoaXMuc2Nyb2xsVG8oJ3RvcCcpO1xuXG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuaW5lcnRpYUJ5RHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RJbmVydGlvblBvaW50WCA9IHRoaXMuX3N0YXJ0SW5lcnRpb25Qb2ludFg7XG4gICAgICAgICAgICB0aGlzLl9sYXN0SW5lcnRpb25Qb2ludFkgPSB0aGlzLl9zdGFydEluZXJ0aW9uUG9pbnRZO1xuICAgICAgICAgICAgdGhpcy5fc3RhcnRJbmVydGlvblBvaW50WCA9IGV2LmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl9zdGFydEluZXJ0aW9uUG9pbnRZID0gZXYuY2xpZW50WTtcbiAgICAgICAgICAgIHRoaXMuX2luZXJ0aWFYID0gMDtcbiAgICAgICAgICAgIHRoaXMuX2luZXJ0aWFZID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyLmFkZENsYXNzKCdzY3JvbGxEcmFnZ2FibGUtZHJhZ2luZycpO1xuICAgIH07XG5cbiAgICBwcm90b3R5cGUuX19tb3VzZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGlmICh0aGlzLl9wcmVzc2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29uZmlnLmluZXJ0aWFCeURyYWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEluZXJ0aW9uUG9pbnRYID0gdGhpcy5fc3RhcnRJbmVydGlvblBvaW50WDtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0SW5lcnRpb25Qb2ludFkgPSB0aGlzLl9zdGFydEluZXJ0aW9uUG9pbnRZO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0SW5lcnRpb25Qb2ludFggPSBldi5jbGllbnRYO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0SW5lcnRpb25Qb2ludFkgPSBldi5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnNjcm9sbFggJiYgdGhpcy5zY3JvbGxUbygnbGVmdCcsIHRoaXMuX3N0YXJ0U2Nyb2xsWCArICh0aGlzLl9zdGFydE1vdXNlZG93blggLSBldi5jbGllbnRYKSk7XG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc2Nyb2xsWSAmJiB0aGlzLnNjcm9sbFRvKCd0b3AnLCB0aGlzLl9zdGFydFNjcm9sbFkgKyAodGhpcy5fc3RhcnRNb3VzZWRvd25ZIC0gZXYuY2xpZW50WSkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb3RvdHlwZS5fX2NvbnRyb2xzQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzQW5pbWF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgJHRhcmdldCA9ICQoZXYudGFyZ2V0KTtcbiAgICAgICAgdmFyIGRhdGEgPSAkdGFyZ2V0LmRhdGEoJ2RyYWdnYWJsZVNjcm9sbENvbnRyb2wnKS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGF0YVswXTtcbiAgICAgICAgdmFyIHN0ZXAgPSBzdGF0aWNzLmNvbnZlcnRlclVuaXRUb1B4cyhwYXJzZUludChkYXRhWzFdKSwgZGF0YVsxXS5tYXRjaCgvW15cXGRcXC5dKy9pKVswXSk7XG4gICAgICAgIHZhciBjdXJyZW50VmFsO1xuXG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgIHN0ZXAgPSAwIC0gc3RlcDtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsID0gdGhpcy5zY3JvbGxUbygndG9wJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWwgPSB0aGlzLnNjcm9sbFRvKCd0b3AnKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAndG9wJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWwgPSB0aGlzLnNjcm9sbFRvKCdsZWZ0Jyk7XG4gICAgICAgICAgICAgICAgc3RlcCA9IDAgLSBzdGVwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsID0gdGhpcy5zY3JvbGxUbygnbGVmdCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JvbGxUbyhkaXJlY3Rpb24sIGN1cnJlbnRWYWwgKyBzdGVwLCB0aGlzLl9jb25maWcuYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHMpO1xuICAgIH07XG5cbiAgICB2YXIgJGNvbnRhaW5lcnMgPSAkKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsXScpO1xuXG4gICAgaWYgKCRjb250YWluZXJzLmxlbmd0aCkge1xuICAgICAgICAkY29udGFpbmVycy5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgJChlbCkuZHJhZ2dhYmxlU2Nyb2xsKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKTsiXX0=
