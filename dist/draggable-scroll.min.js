!function s(i,n,l){function a(r,t){if(!n[r]){if(!i[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+r+"'")}var o=n[r]={exports:{}};i[r][0].call(o.exports,function(t){var e=i[r][1][t];return a(e||t)},o,o.exports,s,i,n,l)}return n[r].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)a(l[t]);return a}({1:[function(t,e,r){function o(t,e){this._totalInertionEnergy=0,this._totalInertionFrames=1,this._inertiaX=0,this._inertiaY=0,this._inertiaSpeed=e,this.aggregator=t}var s=o.prototype;s.reset=function(){this._totalInertionEnergy=0,this._totalInertionFrames=1},s.inertionMove=function(){if(1500<this._totalInertionEnergy){var t=this;this.aggregator._$scrolledWrapper.addClass("scrollDraggable-inertia-move");var e=this._inertiaX/this._totalInertionFrames;this._totalInertionEnergy-=12*Math.abs(e),this.aggregator.scrollTo("left",this.aggregator.scrollTo("left")+e);var r=this._inertiaY/this._totalInertionFrames;this._totalInertionEnergy-=12*Math.abs(r),this.aggregator.scrollTo("top",this.aggregator.scrollTo("top")+r),this.aggregator.emitEvent({type:"draggableScroll:inertia",data:{leavePower:this._totalInertionEnergy,stepX:e,stepY:r}}),0<this._totalInertionEnergy?(this._totalInertionFrames++,setTimeout(function(){t.inertionMove()},Math.ceil(1e3/60))):(this._breakInertion=!1,this.aggregator._$scrolledWrapper.removeClass("scrollDraggable-inertia-move"))}else this.aggregator._$scrolledWrapper.removeClass("scrollDraggable-inertia-move")},s.setInertion=function(t,e,r,o){return this._inertiaX=60*(t-r),this._inertiaY=60*(e-o),this._totalInertionEnergy=Math.abs(this._inertiaX)+Math.abs(this._inertiaY),this._totalInertionFrames=this._inertiaSpeed,this},e.exports=o},{}],2:[function(t,e,r){var o=t("./draggable-scroll_inertion");$.fn.draggableScroll=function t(e){if(!(this instanceof t))return(e=t._validateConfig(e)).$element=this,new t(e);this._config=e,this._$scrolledElm=this._config.$element,this._pressed=!1,this._isAnimate=!1,this._startScrollX=void 0,this._startScrollY=void 0,this._startMousedownX=void 0,this._startMousedownY=void 0,this._pointsToCheckImpulse=4,this._lastInertionsPoints=[],this._inertia=new o(this,this._config.inertialResistance),this._findElms()._appendStyles()._initListeners()};var s,i,n=$.fn.draggableScroll,l=$.fn.draggableScroll.prototype;n.defaultConfig={scrollX:!0,scrollY:!0,dropOnMouseLeave:!1,animateScrollByControls:!0,animateScrollTime:200,hideScrollbars:!0,inertiaByDragging:!0,detectDirectionDrag:!0,removeDirectionDragOnMouseUp:!0,inertialResistance:150},n._validateConfig=function(t){switch(typeof t){case"object":return $.extend(n.defaultConfig,t);case"undefined":return $.extend(n.defaultConfig,{});default:throw new Error("DraggableScroll: Undefined type of config argument.")}},n._unitsConverters={px:function(t){return t},vw:(i=$(document),function(t){return i.width()/100*t}),vh:(s=$(document),function(t){return s.height()/100*t})},n.addUnitConverter=function(t,e){n._unitsConverters[t]&&console.warn("Converter for "+t+" was changed."),n._unitsConverters[t]=e},n.converterUnitToPxs=function(t,e){var r=n._unitsConverters[e];if(!r)throw new Error('Undefined css units named as: "'+e+'" \n.Add converter ($.fn.draggableScroll.addUnitConverter(unit, convertFunction)) to PXs for that unit, or you have a typo.');return r(t)},l.scrollTo=function(t,e,r){var o,s="scroll"+t.charAt(0).toUpperCase()+t.slice(1);if(void 0!==e)if(r){var i={};i[s]=e,this._$scrolledElm.animate(i,this._config.animateScrollTime,function(){this._isAnimate=!1}.bind(this)),this._isAnimate=!0}else this._$scrolledElm[s](e);else o=this._$scrolledElm[s]();return o},l.emitEvent=function(t){this._$scrolledElm.trigger(t)},l._findElms=function(){if(this._$scrolledWrapper=this._config.$element,this._$scrolledElm=this._config.$element.find("[data-draggable-scrolled-content]"),0===this._$scrolledElm.length)throw new Error("DraggableScroll: Cannon find scrolled content element. \n            Use [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");if(1<this._$scrolledElm.length)throw new Error("DraggableScroll: Found more than one [data-draggable-scrolled-content] inside [data-draggable-scroll] container.");return this},l._appendStyles=function(){var t=this._config.hideScrollbars;return this._$scrolledWrapper.css("user-select","none"),t&&this._$scrolledWrapper.css("overflow","hidden"),this._$scrolledElm.css({overflow:"scroll",height:t?"calc(100% + 17px)":"100%",width:t?"calc(100% + 17px)":"100%"}),this},l._addMovePoints=function(t,e){return this._lastInertionsPoints.push({x:t,y:e})>this._pointsToCheckImpulse&&this._lastInertionsPoints.shift(),this},l._clearMovePoints=function(){return this._lastInertionsPoints.length=0,this},l._removeDirectionsClasses=function(){return this._config.detectDirectionDrag&&this._config.removeDirectionDragOnMouseUp&&this._$scrolledWrapper.removeClass("scroll-draggable_move_left scroll-draggable_move_right scroll-draggable_move_top scroll-draggable_move_bottom"),this},l._toggleDirectionsClasses=function(t,e,r,o){return t<r?this._$scrolledWrapper.addClass("scroll-draggable_move_left").removeClass("scroll-draggable_move_right"):t===r?this._$scrolledWrapper.removeClass("scroll-draggable_move_right scroll-draggable_move_left"):this._$scrolledWrapper.addClass("scroll-draggable_move_right").removeClass("scroll-draggable_move_left"),e<o?this._$scrolledWrapper.addClass("scroll-draggable_move_top").removeClass("scroll-draggable_move_bottom"):e===o?this._$scrolledWrapper.removeClass("scroll-draggable_move_bottom scroll-draggable_move_top"):this._$scrolledWrapper.addClass("scroll-draggable_move_bottom").removeClass("scroll-draggable_move_top"),this},l._initListeners=function(){return this._$scrolledElm.on("mousedown",this.__mousedownHandler.bind(this)).on("mouseup",this.__mouseupHandler.bind(this)).on("mousemove",this.__mousemoveHandler.bind(this)),this._$scrolledWrapper.find("[data-draggable-scroll-control]").on("click",this.__controlsClickHandler.bind(this)),this._config.dropOnMouseLeave&&this._$scrolledElm.on("mouseleave",this.__mouseupHandler.bind(this)),this},l.__mouseupHandler=function(t){this._pressed=!1,this._$scrolledWrapper.removeClass("scrollDraggable-draging"),this._removeDirectionsClasses();var e=0,r=0;this._lastInertionsPoints.forEach(function(t){e+=t.x,r+=t.y}),e/=this._lastInertionsPoints.length,r/=this._lastInertionsPoints.length,this._clearMovePoints();var o=t.clientX,s=t.clientY;this._inertia.setInertion(e,r,o,s).inertionMove()},l.__mousedownHandler=function(t){this._pressed=!0,this._startMousedownX=t.clientX,this._startMousedownY=t.clientY,this._startScrollX=this.scrollTo("left"),this._startScrollY=this.scrollTo("top"),this._addMovePoints(t.clientX,t.clientY),this._inertia.reset(),this._$scrolledWrapper.addClass("scrollDraggable-draging")},l.__mousemoveHandler=function(t){var e=this.scrollTo("left"),r=this.scrollTo("top"),o=this._startScrollX+(this._startMousedownX-t.clientX),s=this._startScrollY+(this._startMousedownY-t.clientY);this._pressed&&(this._addMovePoints(t.clientX,t.clientY),this._config.scrollX&&this.scrollTo("left",o),this._config.scrollY&&this.scrollTo("top",s),this._toggleDirectionsClasses(e,r,o,s))},l.__controlsClickHandler=function(t){if(!this._isAnimate){this._inertia.reset();var e,r=$(t.currentTarget).data("draggableScrollControl").split(":"),o=r[0],s=n.converterUnitToPxs(parseInt(r[1]),r[1].match(/[^\d\.]+/i)[0]);switch(o){case"top":s=0-s,e=this.scrollTo("top");break;case"bottom":e=this.scrollTo("top"),o="top";break;case"left":e=this.scrollTo("left"),s=0-s;break;case"right":o="left",e=this.scrollTo("left")}this.scrollTo(o,e+s,this._config.animateScrollByControls)}};var a=$("[data-draggable-scroll]");a.length&&a.each(function(t,e){$(e).draggableScroll()})},{"./draggable-scroll_inertion":1}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYWdnYWJsZS1zY3JvbGwuanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsIkVycm9yIiwiZiIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkluZXJ0aWEiLCJhZ2dyZWdhdG9yIiwiaW5lcnRpYVNwZWVkIiwidGhpcyIsIl90b3RhbEluZXJ0aW9uRW5lcmd5IiwiX3RvdGFsSW5lcnRpb25GcmFtZXMiLCJfaW5lcnRpYVgiLCJfaW5lcnRpYVkiLCJfaW5lcnRpYVNwZWVkIiwicHJvdG90eXBlIiwicmVzZXQiLCJpbmVydGlvbk1vdmUiLCJzZWxmIiwiXyRzY3JvbGxlZFdyYXBwZXIiLCJhZGRDbGFzcyIsInN0ZXBYIiwiTWF0aCIsImFicyIsInNjcm9sbFRvIiwic3RlcFkiLCJlbWl0RXZlbnQiLCJ0eXBlIiwiZGF0YSIsImxlYXZlUG93ZXIiLCJzZXRUaW1lb3V0IiwiY2VpbCIsIl9icmVha0luZXJ0aW9uIiwicmVtb3ZlQ2xhc3MiLCJzZXRJbmVydGlvbiIsIngxIiwieTEiLCJ4MiIsInkyIiwiMiIsIiQiLCJmbiIsImRyYWdnYWJsZVNjcm9sbCIsIkRyYWdnYWJsZVNjcm9sbCIsImNvbmZpZyIsIl92YWxpZGF0ZUNvbmZpZyIsIiRlbGVtZW50IiwiX2NvbmZpZyIsIl8kc2Nyb2xsZWRFbG0iLCJfcHJlc3NlZCIsIl9pc0FuaW1hdGUiLCJfc3RhcnRTY3JvbGxYIiwidW5kZWZpbmVkIiwiX3N0YXJ0U2Nyb2xsWSIsIl9zdGFydE1vdXNlZG93blgiLCJfc3RhcnRNb3VzZWRvd25ZIiwiX3BvaW50c1RvQ2hlY2tJbXB1bHNlIiwiX2xhc3RJbmVydGlvbnNQb2ludHMiLCJfaW5lcnRpYSIsImluZXJ0aWFsUmVzaXN0YW5jZSIsIl9maW5kRWxtcyIsIl9hcHBlbmRTdHlsZXMiLCJfaW5pdExpc3RlbmVycyIsIiRkb2MiLCJzdGF0aWNzIiwiZGVmYXVsdENvbmZpZyIsInNjcm9sbFgiLCJzY3JvbGxZIiwiZHJvcE9uTW91c2VMZWF2ZSIsImFuaW1hdGVTY3JvbGxCeUNvbnRyb2xzIiwiYW5pbWF0ZVNjcm9sbFRpbWUiLCJoaWRlU2Nyb2xsYmFycyIsImluZXJ0aWFCeURyYWdnaW5nIiwiZGV0ZWN0RGlyZWN0aW9uRHJhZyIsInJlbW92ZURpcmVjdGlvbkRyYWdPbk1vdXNlVXAiLCJjb25mIiwiZXh0ZW5kIiwiX3VuaXRzQ29udmVydGVycyIsInB4IiwiZGlnIiwidnciLCJkb2N1bWVudCIsIndpZHRoIiwidmgiLCJoZWlnaHQiLCJhZGRVbml0Q29udmVydGVyIiwidW5pdCIsImNvbnZlcnRlciIsImNvbnNvbGUiLCJ3YXJuIiwiY29udmVydGVyVW5pdFRvUHhzIiwidHVybiIsInVuaXRzIiwiYW5pbSIsInZhbCIsIm1ldGhvZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJhbmltUGFyYW0iLCJhbmltYXRlIiwiYmluZCIsImV2IiwidHJpZ2dlciIsImZpbmQiLCJoaWRlU2Nyb2xsIiwiY3NzIiwib3ZlcmZsb3ciLCJfYWRkTW92ZVBvaW50cyIsIngiLCJ5IiwicHVzaCIsInNoaWZ0IiwiX2NsZWFyTW92ZVBvaW50cyIsIl9yZW1vdmVEaXJlY3Rpb25zQ2xhc3NlcyIsIl90b2dnbGVEaXJlY3Rpb25zQ2xhc3NlcyIsInByZXZYIiwicHJldlkiLCJjdXJyWCIsImN1cnJZIiwib24iLCJfX21vdXNlZG93bkhhbmRsZXIiLCJfX21vdXNldXBIYW5kbGVyIiwiX19tb3VzZW1vdmVIYW5kbGVyIiwiX19jb250cm9sc0NsaWNrSGFuZGxlciIsImxhc3RYIiwibGFzdFkiLCJmb3JFYWNoIiwidiIsImN1cnJlbnRYIiwiY2xpZW50WCIsImN1cnJlbnRZIiwiY2xpZW50WSIsImN1cnJlbnRWYWwiLCJjdXJyZW50VGFyZ2V0Iiwic3BsaXQiLCJkaXJlY3Rpb24iLCJzdGVwIiwicGFyc2VJbnQiLCJtYXRjaCIsIiRjb250YWluZXJzIiwiZWFjaCIsImVsIiwiLi9kcmFnZ2Fi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S2UsU0FBUyxRQUluQ2YsS0FBS2UsU0FBU2dILEVBQVdILEVBQWFJLEVBQU1oSSxLQUFLc0MsUUFBUXNCLDJCQVE3RCxJQUFJdUUsRUFBY3BHLEVBQUUsMkJBRWhCb0csRUFBWXpJLFFBQ1p5SSxFQUFZQyxLQUFLLFNBQVUvSSxFQUFHZ0osR0FDMUJ0RyxFQUFFc0csR0FBSXBHLHFCQUdaLENBQUNxRyw4QkFBOEIsS0FBSyxHQUFHLENBQUMiLCJmaWxlIjoiZHJhZ2dhYmxlLXNjcm9sbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmZ1bmN0aW9uIEluZXJ0aWEoYWdncmVnYXRvciwgaW5lcnRpYVNwZWVkKSB7XG4gICAgdGhpcy5fdG90YWxJbmVydGlvbkVuZXJneSA9IDA7XG4gICAgdGhpcy5fdG90YWxJbmVydGlvbkZyYW1lcyA9IDE7XG5cbiAgICB0aGlzLl9pbmVydGlhWCA9IDA7XG4gICAgdGhpcy5faW5lcnRpYVkgPSAwO1xuICAgIHRoaXMuX2luZXJ0aWFTcGVlZCA9IGluZXJ0aWFTcGVlZDtcbiAgICB0aGlzLmFnZ3JlZ2F0b3IgPSBhZ2dyZWdhdG9yO1xufVxuXG52YXIgcHJvdG90eXBlID0gSW5lcnRpYS5wcm90b3R5cGU7XG5cblxucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3RvdGFsSW5lcnRpb25FbmVyZ3kgPSAwO1xuICAgIHRoaXMuX3RvdGFsSW5lcnRpb25GcmFtZXMgPSAxO1xufTtcblxuXG5wcm90b3R5cGUuaW5lcnRpb25Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl90b3RhbEluZXJ0aW9uRW5lcmd5ID4gMTUwMCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5hZ2dyZWdhdG9yXG4gICAgICAgICAgICAuXyRzY3JvbGxlZFdyYXBwZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWluZXJ0aWEtbW92ZScpO1xuXG4gICAgICAgIHZhciBzdGVwWCA9IHRoaXMuX2luZXJ0aWFYIC8gdGhpcy5fdG90YWxJbmVydGlvbkZyYW1lcztcbiAgICAgICAgdGhpcy5fdG90YWxJbmVydGlvbkVuZXJneSAtPSBNYXRoLmFicyhzdGVwWCkgKiAxMjtcbiAgICAgICAgdGhpcy5hZ2dyZWdhdG9yXG4gICAgICAgICAgICAuc2Nyb2xsVG8oJ2xlZnQnLCB0aGlzLmFnZ3JlZ2F0b3Iuc2Nyb2xsVG8oJ2xlZnQnKSArIHN0ZXBYKTtcblxuXG5cbiAgICAgICAgdmFyIHN0ZXBZID0gdGhpcy5faW5lcnRpYVkgLyB0aGlzLl90b3RhbEluZXJ0aW9uRnJhbWVzO1xuICAgICAgICB0aGlzLl90b3RhbEluZXJ0aW9uRW5lcmd5IC09IE1hdGguYWJzKHN0ZXBZKSAqIDEyO1xuICAgICAgICB0aGlzLmFnZ3JlZ2F0b3JcbiAgICAgICAgICAgIC5zY3JvbGxUbygndG9wJywgdGhpcy5hZ2dyZWdhdG9yLnNjcm9sbFRvKCd0b3AnKSArIHN0ZXBZKTtcblxuICAgICAgICB0aGlzLmFnZ3JlZ2F0b3IuZW1pdEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdkcmFnZ2FibGVTY3JvbGw6aW5lcnRpYScsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbGVhdmVQb3dlcjogdGhpcy5fdG90YWxJbmVydGlvbkVuZXJneSxcbiAgICAgICAgICAgICAgICBzdGVwWDogc3RlcFgsXG4gICAgICAgICAgICAgICAgc3RlcFk6IHN0ZXBZLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5fdG90YWxJbmVydGlvbkVuZXJneSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsSW5lcnRpb25GcmFtZXMrKztcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmluZXJ0aW9uTW92ZSgpO1xuXG4gICAgICAgICAgICB9LCBNYXRoLmNlaWwoMTAwMCAvIDYwKSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2JyZWFrSW5lcnRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYWdncmVnYXRvclxuICAgICAgICAgICAgICAgIC5fJHNjcm9sbGVkV3JhcHBlclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWluZXJ0aWEtbW92ZScpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZ2dyZWdhdG9yXG4gICAgICAgICAgICAuXyRzY3JvbGxlZFdyYXBwZXJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWluZXJ0aWEtbW92ZScpO1xuICAgIH1cbn07XG5cblxucHJvdG90eXBlLnNldEluZXJ0aW9uID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdGhpcy5faW5lcnRpYVggPSAoeDEgLSB4MikgKiA2MDsgLy9wZXIgc2VjXG4gICAgdGhpcy5faW5lcnRpYVkgPSAoeTEgLSB5MikgKiA2MDtcblxuICAgIHRoaXMuX3RvdGFsSW5lcnRpb25FbmVyZ3kgPSBNYXRoLmFicyh0aGlzLl9pbmVydGlhWCkgKyBNYXRoLmFicyh0aGlzLl9pbmVydGlhWSk7XG4gICAgdGhpcy5fdG90YWxJbmVydGlvbkZyYW1lcyA9IHRoaXMuX2luZXJ0aWFTcGVlZDtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEluZXJ0aWE7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIEluZXJ0aWEgPSByZXF1aXJlKCcuL2RyYWdnYWJsZS1zY3JvbGxfaW5lcnRpb24nKTtcclxuXHJcblxyXG4kLmZuLmRyYWdnYWJsZVNjcm9sbCA9IGZ1bmN0aW9uIERyYWdnYWJsZVNjcm9sbChjb25maWcpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBTZWxmIGNvbnN0cnVjdCBmdW5jdGlvbiBieSBqUXVlcnkgY2FsbGluZ1xyXG4gICAgICpcclxuICAgICAqICovXHJcblxyXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERyYWdnYWJsZVNjcm9sbCkpIHtcclxuICAgICAgICBjb25maWcgPSBEcmFnZ2FibGVTY3JvbGwuX3ZhbGlkYXRlQ29uZmlnKGNvbmZpZyk7XHJcbiAgICAgICAgY29uZmlnLiRlbGVtZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEcmFnZ2FibGVTY3JvbGwoY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl8kc2Nyb2xsZWRFbG0gPSB0aGlzLl9jb25maWcuJGVsZW1lbnQ7XHJcbiAgICB0aGlzLl9wcmVzc2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc0FuaW1hdGUgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBTY3JvbGwgcGFyYW1zOlxyXG4gICAgICpcclxuICAgICAqICovXHJcblxyXG4gICAgdGhpcy5fc3RhcnRTY3JvbGxYID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fc3RhcnRTY3JvbGxZID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fc3RhcnRNb3VzZWRvd25YID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fc3RhcnRNb3VzZWRvd25ZID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEluZXJ0aWEgYnkgZHJhZyBtb3VzZVxyXG4gICAgICpcclxuICAgICAqICovXHJcbiAgICB0aGlzLl9wb2ludHNUb0NoZWNrSW1wdWxzZSA9IDQ7XHJcbiAgICB0aGlzLl9sYXN0SW5lcnRpb25zUG9pbnRzID0gW107XHJcblxyXG4gICAgdGhpcy5faW5lcnRpYSA9IG5ldyBJbmVydGlhKHRoaXMsIHRoaXMuX2NvbmZpZy5pbmVydGlhbFJlc2lzdGFuY2UpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEluaXRpYWxpemVcclxuICAgICAqXHJcbiAgICAgKiAqL1xyXG5cclxuICAgIHRoaXMuX2ZpbmRFbG1zKClcclxuICAgICAgICAuX2FwcGVuZFN0eWxlcygpXHJcbiAgICAgICAgLl9pbml0TGlzdGVuZXJzKCk7XHJcbn07XHJcblxyXG5cclxudmFyIHN0YXRpY3MgPSAkLmZuLmRyYWdnYWJsZVNjcm9sbDtcclxudmFyIHByb3RvdHlwZSA9ICQuZm4uZHJhZ2dhYmxlU2Nyb2xsLnByb3RvdHlwZTtcclxuXHJcblxyXG4vKipcclxuICpcclxuICpcclxuICogU3RhdGljcyBtZXRob2RzOlxyXG4gKlxyXG4gKlxyXG4gKiAqL1xyXG5cclxuc3RhdGljcy5kZWZhdWx0Q29uZmlnID0ge1xyXG4gICAgc2Nyb2xsWDogdHJ1ZSxcclxuICAgIHNjcm9sbFk6IHRydWUsXHJcbiAgICBkcm9wT25Nb3VzZUxlYXZlOiBmYWxzZSxcclxuICAgIGFuaW1hdGVTY3JvbGxCeUNvbnRyb2xzOiB0cnVlLFxyXG4gICAgYW5pbWF0ZVNjcm9sbFRpbWU6IDIwMCxcclxuICAgIGhpZGVTY3JvbGxiYXJzOiB0cnVlLFxyXG4gICAgaW5lcnRpYUJ5RHJhZ2dpbmc6IHRydWUsXHJcbiAgICBkZXRlY3REaXJlY3Rpb25EcmFnOiB0cnVlLFxyXG4gICAgcmVtb3ZlRGlyZWN0aW9uRHJhZ09uTW91c2VVcDogdHJ1ZSxcclxuICAgIGluZXJ0aWFsUmVzaXN0YW5jZTogMTUwXHJcbn07XHJcblxyXG5cclxuc3RhdGljcy5fdmFsaWRhdGVDb25maWcgPSBmdW5jdGlvbiAoY29uZikge1xyXG4gICAgc3dpdGNoICh0eXBlb2YgKGNvbmYpKSB7XHJcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHN0YXRpY3MuZGVmYXVsdENvbmZpZywgY29uZik7XHJcbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcclxuICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHN0YXRpY3MuZGVmYXVsdENvbmZpZywge30pO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHJhZ2dhYmxlU2Nyb2xsOiBVbmRlZmluZWQgdHlwZSBvZiBjb25maWcgYXJndW1lbnQuJyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuc3RhdGljcy5fdW5pdHNDb252ZXJ0ZXJzID0ge1xyXG4gICAgcHg6IGZ1bmN0aW9uIChkaWcpIHtcclxuICAgICAgICByZXR1cm4gZGlnO1xyXG4gICAgfSxcclxuICAgIHZ3OiAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkZG9jID0gJChkb2N1bWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGlnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkZG9jLndpZHRoKCkgLyAxMDAgKiBkaWc7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKSxcclxuICAgIHZoOiAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkZG9jID0gJChkb2N1bWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGlnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkZG9jLmhlaWdodCgpIC8gMTAwICogZGlnO1xyXG4gICAgICAgIH1cclxuICAgIH0pKClcclxufTtcclxuXHJcblxyXG5zdGF0aWNzLmFkZFVuaXRDb252ZXJ0ZXIgPSBmdW5jdGlvbiAodW5pdCwgY29udmVydGVyKSB7XHJcbiAgICBpZiAoc3RhdGljcy5fdW5pdHNDb252ZXJ0ZXJzW3VuaXRdKVxyXG4gICAgICAgIGNvbnNvbGUud2FybignQ29udmVydGVyIGZvciAnICsgdW5pdCArICcgd2FzIGNoYW5nZWQuJyk7XHJcblxyXG4gICAgc3RhdGljcy5fdW5pdHNDb252ZXJ0ZXJzW3VuaXRdID0gY29udmVydGVyO1xyXG59O1xyXG5cclxuXHJcbnN0YXRpY3MuY29udmVydGVyVW5pdFRvUHhzID0gZnVuY3Rpb24gKGRpZywgdW5pdCkge1xyXG4gICAgdmFyIGNvbnZlcnRlciA9IHN0YXRpY3MuX3VuaXRzQ29udmVydGVyc1t1bml0XTtcclxuXHJcbiAgICBpZiAoIWNvbnZlcnRlcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZGVmaW5lZCBjc3MgdW5pdHMgbmFtZWQgYXM6IFwiJyArIHVuaXQgKyAnXCIgXFxuXFwuJyArXHJcbiAgICAgICAgICAgICdBZGQgY29udmVydGVyICgkLmZuLmRyYWdnYWJsZVNjcm9sbC5hZGRVbml0Q29udmVydGVyKHVuaXQsIGNvbnZlcnRGdW5jdGlvbikpIHRvIFBYcyBmb3IgdGhhdCB1bml0LCBvciB5b3UgaGF2ZSBhIHR5cG8uJyk7XHJcblxyXG4gICAgcmV0dXJuIGNvbnZlcnRlcihkaWcpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKlxyXG4gKlxyXG4gKiBQcm90b3R5cGUgbWV0aG9kczpcclxuICpcclxuICpcclxuICogKi9cclxuXHJcbnByb3RvdHlwZS5zY3JvbGxUbyA9IGZ1bmN0aW9uICh0dXJuLCB1bml0cywgYW5pbSkge1xyXG4gICAgdmFyIG1ldGhvZCA9ICdzY3JvbGwnICsgdHVybi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR1cm4uc2xpY2UoMSksIHZhbDtcclxuXHJcbiAgICBpZiAodW5pdHMgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICBpZiAoYW5pbSkge1xyXG4gICAgICAgICAgICB2YXIgYW5pbVBhcmFtID0ge307XHJcblxyXG4gICAgICAgICAgICBhbmltUGFyYW1bbWV0aG9kXSA9IHVuaXRzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVkRWxtXHJcbiAgICAgICAgICAgICAgICAuYW5pbWF0ZShhbmltUGFyYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLmFuaW1hdGVTY3JvbGxUaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNBbmltYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lzQW5pbWF0ZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRFbG1bbWV0aG9kXSh1bml0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFsID0gdGhpcy5fJHNjcm9sbGVkRWxtW21ldGhvZF0oKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsO1xyXG59O1xyXG5cclxuXHJcblxyXG5wcm90b3R5cGUuZW1pdEV2ZW50ID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICB0aGlzLl8kc2Nyb2xsZWRFbG0udHJpZ2dlcihldik7XHJcbn07XHJcblxyXG5wcm90b3R5cGUuX2ZpbmRFbG1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlciA9IHRoaXMuX2NvbmZpZ1xyXG4gICAgICAgIC4kZWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl8kc2Nyb2xsZWRFbG0gPSB0aGlzLl9jb25maWdcclxuICAgICAgICAuJGVsZW1lbnRcclxuICAgICAgICAuZmluZCgnW2RhdGEtZHJhZ2dhYmxlLXNjcm9sbGVkLWNvbnRlbnRdJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuXyRzY3JvbGxlZEVsbS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcmFnZ2FibGVTY3JvbGw6IENhbm5vbiBmaW5kIHNjcm9sbGVkIGNvbnRlbnQgZWxlbWVudC4gXFxuXFxcclxuICAgICAgICAgICAgVXNlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxlZC1jb250ZW50XSBpbnNpZGUgW2RhdGEtZHJhZ2dhYmxlLXNjcm9sbF0gY29udGFpbmVyLicpO1xyXG5cclxuICAgIGlmICh0aGlzLl8kc2Nyb2xsZWRFbG0ubGVuZ3RoID4gMSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RyYWdnYWJsZVNjcm9sbDogRm91bmQgbW9yZSB0aGFuIG9uZSBbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsZWQtY29udGVudF0gaW5zaWRlIFtkYXRhLWRyYWdnYWJsZS1zY3JvbGxdIGNvbnRhaW5lci4nKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcblxyXG5wcm90b3R5cGUuX2FwcGVuZFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBoaWRlU2Nyb2xsID0gdGhpcy5fY29uZmlnXHJcbiAgICAgICAgLmhpZGVTY3JvbGxiYXJzO1xyXG5cclxuICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcclxuICAgICAgICAuY3NzKCd1c2VyLXNlbGVjdCcsICdub25lJyk7XHJcblxyXG4gICAgaWYgKGhpZGVTY3JvbGwpIHtcclxuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyXHJcbiAgICAgICAgICAgIC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuXyRzY3JvbGxlZEVsbVxyXG4gICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAnb3ZlcmZsb3cnOiAnc2Nyb2xsJyxcclxuICAgICAgICAgICAgJ2hlaWdodCc6IGhpZGVTY3JvbGwgPyAnY2FsYygxMDAlICsgMTdweCknIDogJzEwMCUnLFxyXG4gICAgICAgICAgICAnd2lkdGgnOiBoaWRlU2Nyb2xsID8gJ2NhbGMoMTAwJSArIDE3cHgpJyA6ICcxMDAlJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcblxyXG5wcm90b3R5cGUuX2FkZE1vdmVQb2ludHMgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgaWYgKHRoaXMuX2xhc3RJbmVydGlvbnNQb2ludHMucHVzaCh7eDogeCwgeTogeX0pID4gdGhpcy5fcG9pbnRzVG9DaGVja0ltcHVsc2UpIHtcclxuICAgICAgICB0aGlzLl9sYXN0SW5lcnRpb25zUG9pbnRzLnNoaWZ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5cclxucHJvdG90eXBlLl9jbGVhck1vdmVQb2ludHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9sYXN0SW5lcnRpb25zUG9pbnRzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5cclxucHJvdG90eXBlLl9yZW1vdmVEaXJlY3Rpb25zQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLl9jb25maWcuZGV0ZWN0RGlyZWN0aW9uRHJhZyAmJiB0aGlzLl9jb25maWcucmVtb3ZlRGlyZWN0aW9uRHJhZ09uTW91c2VVcCkge1xyXG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcclxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzY3JvbGwtZHJhZ2dhYmxlX21vdmVfbGVmdCBzY3JvbGwtZHJhZ2dhYmxlX21vdmVfcmlnaHQgc2Nyb2xsLWRyYWdnYWJsZV9tb3ZlX3RvcCBzY3JvbGwtZHJhZ2dhYmxlX21vdmVfYm90dG9tJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5cclxucHJvdG90eXBlLl90b2dnbGVEaXJlY3Rpb25zQ2xhc3NlcyA9IGZ1bmN0aW9uIChwcmV2WCwgcHJldlksIGN1cnJYLCBjdXJyWSkge1xyXG5cclxuICAgIGlmICggcHJldlggPCBjdXJyWCApIHtcclxuICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnc2Nyb2xsLWRyYWdnYWJsZV9tb3ZlX2xlZnQnKVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3Njcm9sbC1kcmFnZ2FibGVfbW92ZV9yaWdodCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAocHJldlggPT09IGN1cnJYKSB7XHJcbiAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2Nyb2xsLWRyYWdnYWJsZV9tb3ZlX3JpZ2h0IHNjcm9sbC1kcmFnZ2FibGVfbW92ZV9sZWZ0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzY3JvbGwtZHJhZ2dhYmxlX21vdmVfcmlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzY3JvbGwtZHJhZ2dhYmxlX21vdmVfbGVmdCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHByZXZZIDwgY3VyclkgKSB7XHJcbiAgICAgICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3Njcm9sbC1kcmFnZ2FibGVfbW92ZV90b3AnKVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3Njcm9sbC1kcmFnZ2FibGVfbW92ZV9ib3R0b20nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHByZXZZID09PSBjdXJyWSkge1xyXG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZWRXcmFwcGVyXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3Njcm9sbC1kcmFnZ2FibGVfbW92ZV9ib3R0b20gc2Nyb2xsLWRyYWdnYWJsZV9tb3ZlX3RvcCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxlZFdyYXBwZXJcclxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2Nyb2xsLWRyYWdnYWJsZV9tb3ZlX2JvdHRvbScpXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3Njcm9sbC1kcmFnZ2FibGVfbW92ZV90b3AnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5cclxucHJvdG90eXBlLl9pbml0TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fJHNjcm9sbGVkRWxtXHJcbiAgICAgICAgLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9fbW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKVxyXG4gICAgICAgIC5vbignbW91c2V1cCcsIHRoaXMuX19tb3VzZXVwSGFuZGxlci5iaW5kKHRoaXMpKVxyXG4gICAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy5fX21vdXNlbW92ZUhhbmRsZXIuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxyXG4gICAgICAgIC5maW5kKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsLWNvbnRyb2xdJylcclxuICAgICAgICAub24oJ2NsaWNrJywgdGhpcy5fX2NvbnRyb2xzQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgIGlmICh0aGlzLl9jb25maWcuZHJvcE9uTW91c2VMZWF2ZSkge1xyXG4gICAgICAgIHRoaXMuXyRzY3JvbGxlZEVsbVxyXG4gICAgICAgICAgICAub24oJ21vdXNlbGVhdmUnLCB0aGlzLl9fbW91c2V1cEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqXHJcbiAqIFVuYmluZCBwcm90b3R5cGUgbWV0aG9kcyhldmVudC1oYW5kbGVycyk6XHJcbiAqXHJcbiAqXHJcbiAqICovXHJcblxyXG5wcm90b3R5cGUuX19tb3VzZXVwSGFuZGxlciA9IGZ1bmN0aW9uIChldikge1xyXG4gICAgdGhpcy5fcHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlclxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWRyYWdpbmcnKTtcclxuXHJcbiAgICB0aGlzLl9yZW1vdmVEaXJlY3Rpb25zQ2xhc3NlcygpO1xyXG5cclxuICAgIHZhciBsYXN0WCA9IDA7XHJcbiAgICB2YXIgbGFzdFkgPSAwO1xyXG5cclxuICAgIHRoaXMuX2xhc3RJbmVydGlvbnNQb2ludHNcclxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICBsYXN0WCArPSB2Lng7XHJcbiAgICAgICAgICAgIGxhc3RZICs9IHYueTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBsYXN0WCA9IGxhc3RYIC8gdGhpcy5fbGFzdEluZXJ0aW9uc1BvaW50cy5sZW5ndGg7XHJcbiAgICBsYXN0WSA9IGxhc3RZIC8gdGhpcy5fbGFzdEluZXJ0aW9uc1BvaW50cy5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5fY2xlYXJNb3ZlUG9pbnRzKCk7XHJcblxyXG4gICAgdmFyIGN1cnJlbnRYID0gZXYuY2xpZW50WDtcclxuICAgIHZhciBjdXJyZW50WSA9IGV2LmNsaWVudFk7XHJcblxyXG4gICAgdGhpcy5faW5lcnRpYVxyXG4gICAgICAgIC5zZXRJbmVydGlvbihsYXN0WCwgbGFzdFksIGN1cnJlbnRYLCBjdXJyZW50WSlcclxuICAgICAgICAuaW5lcnRpb25Nb3ZlKCk7XHJcbn07XHJcblxyXG5cclxucHJvdG90eXBlLl9fbW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uIChldikge1xyXG4gICAgdGhpcy5fcHJlc3NlZCA9IHRydWU7XHJcbiAgICB0aGlzLl9zdGFydE1vdXNlZG93blggPSBldi5jbGllbnRYO1xyXG4gICAgdGhpcy5fc3RhcnRNb3VzZWRvd25ZID0gZXYuY2xpZW50WTtcclxuICAgIHRoaXMuX3N0YXJ0U2Nyb2xsWCA9IHRoaXMuc2Nyb2xsVG8oJ2xlZnQnKTtcclxuICAgIHRoaXMuX3N0YXJ0U2Nyb2xsWSA9IHRoaXMuc2Nyb2xsVG8oJ3RvcCcpO1xyXG5cclxuICAgIHRoaXMuX2FkZE1vdmVQb2ludHMoZXYuY2xpZW50WCwgZXYuY2xpZW50WSk7XHJcbiAgICB0aGlzLl9pbmVydGlhLnJlc2V0KCk7XHJcblxyXG4gICAgdGhpcy5fJHNjcm9sbGVkV3JhcHBlci5hZGRDbGFzcygnc2Nyb2xsRHJhZ2dhYmxlLWRyYWdpbmcnKTtcclxufTtcclxuXHJcblxyXG5wcm90b3R5cGUuX19tb3VzZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XHJcblxyXG4gICAgdmFyIHByZXZYID0gdGhpcy5zY3JvbGxUbygnbGVmdCcpLFxyXG4gICAgICAgIHByZXZZID0gdGhpcy5zY3JvbGxUbygndG9wJyksXHJcbiAgICAgICAgY3VycmVudFggPSB0aGlzLl9zdGFydFNjcm9sbFggKyAodGhpcy5fc3RhcnRNb3VzZWRvd25YIC0gZXYuY2xpZW50WCksXHJcbiAgICAgICAgY3VycmVudFkgPSB0aGlzLl9zdGFydFNjcm9sbFkgKyAodGhpcy5fc3RhcnRNb3VzZWRvd25ZIC0gZXYuY2xpZW50WSk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3ByZXNzZWQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fYWRkTW92ZVBvaW50cyhldi5jbGllbnRYLCBldi5jbGllbnRZKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnLnNjcm9sbFhcclxuICAgICAgICAmJiB0aGlzLnNjcm9sbFRvKCdsZWZ0JywgY3VycmVudFgpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcuc2Nyb2xsWVxyXG4gICAgICAgICYmIHRoaXMuc2Nyb2xsVG8oJ3RvcCcsIGN1cnJlbnRZKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlRGlyZWN0aW9uc0NsYXNzZXMocHJldlgsIHByZXZZLCBjdXJyZW50WCwgY3VycmVudFkpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbnByb3RvdHlwZS5fX2NvbnRyb2xzQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGV2KSB7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzQW5pbWF0ZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgdGhpcy5faW5lcnRpYS5yZXNldCgpO1xyXG5cclxuICAgIHZhciAkdGFyZ2V0ID0gJChldi5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICBkYXRhID0gJHRhcmdldC5kYXRhKCdkcmFnZ2FibGVTY3JvbGxDb250cm9sJykuc3BsaXQoJzonKSxcclxuICAgICAgICBkaXJlY3Rpb24gPSBkYXRhWzBdLFxyXG4gICAgICAgIHN0ZXAgPSBzdGF0aWNzLmNvbnZlcnRlclVuaXRUb1B4cyhwYXJzZUludChkYXRhWzFdKSwgZGF0YVsxXS5tYXRjaCgvW15cXGRcXC5dKy9pKVswXSksXHJcbiAgICAgICAgY3VycmVudFZhbDtcclxuXHJcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgICAgIHN0ZXAgPSAwIC0gc3RlcDtcclxuICAgICAgICAgICAgY3VycmVudFZhbCA9IHRoaXMuc2Nyb2xsVG8oJ3RvcCcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgY3VycmVudFZhbCA9IHRoaXMuc2Nyb2xsVG8oJ3RvcCcpO1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAndG9wJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICBjdXJyZW50VmFsID0gdGhpcy5zY3JvbGxUbygnbGVmdCcpO1xyXG4gICAgICAgICAgICBzdGVwID0gMCAtIHN0ZXA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdsZWZ0JztcclxuICAgICAgICAgICAgY3VycmVudFZhbCA9IHRoaXMuc2Nyb2xsVG8oJ2xlZnQnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGxUbyhkaXJlY3Rpb24sIGN1cnJlbnRWYWwgKyBzdGVwLCB0aGlzLl9jb25maWcuYW5pbWF0ZVNjcm9sbEJ5Q29udHJvbHMpO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBBdXRvLXNlYXJjaCBmb3IgZWxlbWVudHMgYnkgYXR0cmlidXRlXHJcbiAqICovXHJcblxyXG52YXIgJGNvbnRhaW5lcnMgPSAkKCdbZGF0YS1kcmFnZ2FibGUtc2Nyb2xsXScpO1xyXG5cclxuaWYgKCRjb250YWluZXJzLmxlbmd0aCkge1xyXG4gICAgJGNvbnRhaW5lcnMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcclxuICAgICAgICAkKGVsKS5kcmFnZ2FibGVTY3JvbGwoKTtcclxuICAgIH0pO1xyXG59XG59LHtcIi4vZHJhZ2dhYmxlLXNjcm9sbF9pbmVydGlvblwiOjF9XX0se30sWzJdKSJdfQ==
